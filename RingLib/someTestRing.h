#pragma once

/*==============================================================================
Test ring buffer.
=============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include "ccRingBufferEx.h"
#include "someTestRecord.h"

//******************************************************************************
//******************************************************************************
//******************************************************************************

namespace Some
{

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Test ring buffer.

class alignas(16) TestRing : public CC::MemoryRingBuffer<TestRecord, 100, 20>
{
public:
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Test ring buffer writer.

class TestRingWriter : public CC::RingBufferWriter
{
private:
   typedef CC::RingBufferWriter BaseClass;
public:

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // Test variables.
   bool mFirstWriteFlag;
   long long mFirstWriteIndex;
   int mWriteTestMode;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Constructor.
   TestRingWriter();

   // Test methods.
   void resetTest() override;
   void doTest(long long aWriteIndex, void* aElement) override;
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Test ring buffer writer.

class TestRingReader : public CC::RingBufferReader
{
private:
   typedef CC::RingBufferReader BaseClass;
public:

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // Test variables.
   bool mFirstReadFlag;
   long long mFirstReadIndex;
   int mTestPassCount;
   int mTestFailCount;
   long long mTestFailReadIndex;
   long long mTestFailCode[7];

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Constructor.
   TestRingReader();

   // Test methods.
   void resetTest() override;
   void doTest(long long aReadIndex, void* aElement) override;
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
}//namespace

